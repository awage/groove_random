var renderParams={width:800};var printerParams={scale:1,staffwidth:800};var midiParams={qpm:100};var play=0;var midi_tempo=100;var bars_number=10;jQuery.fn.center=function(){this.css("position","absolute");this.css("left",Math.max(0,(($(window).width()-$(this).outerWidth())/2)+$(window).scrollLeft())+"px");return this};$(function(){$("#pg_wdth").slider({from:100,to:1400,step:10,round:1,format:{format:"##",locale:"de"},dimension:"px",skin:"round"});$("#bar_nbr").slider({from:1,to:100,step:1,round:1,format:{format:"##",locale:"de"},dimension:"",skin:"round"});$("#mdi_tmpo").slider({from:10,to:300,step:1,round:1,format:{format:"##",locale:"de"},dimension:"bpm",skin:"round"});$("#mtro_bpm").slider({from:10,to:300,step:1,round:1,format:{format:"##",locale:"de"},dimension:"bpm",skin:"round",callback:function(a){if($.metronome.ticking===true){$.metronome.stop();$.metronome.tempo=a/60;$.metronome.start()}}});$("#listen_bpm").slider({from:10,to:300,step:1,round:1,format:{format:"##",locale:"de"},dimension:"bpm",skin:"round",callback:function(a){if(play==1){StopSound("tune_wav");play=0;play_midi()}}});$("#play_pop").click(function(b){if(midiParams.miditrack){if(play==0){var a=$("#listen_bpm").slider("value");midiFile=MidiFile(midiParams.miditrack,a);synth=Synth(22100);replayer=Replayer(midiFile,synth);AudioPlayer(replayer);PlaySound("tune_wav");play=1;$("#play_pop").html('<i class="icon-white icon-stop"></i>Stop');return false}if(play==1){StopSound("tune_wav");play=0;$("#play_pop").html('<i class="icon-white icon-play"></i>Play');return false}}});$(document).bind("tick",function(){PlaySound("tickwav")})});function PlaySound(a){var b=document.getElementById(a);if(b){b.play()}}function StopSound(a){var b=document.getElementById(a);if(b){b.pause();b.currentTime=0}}function toggle_metronome(){if($.metronome.ticking===true){$.metronome.stop();$("#metro_btn").text("Start")}else{$.metronome.start($("#mtro_bpm").slider("value")/60);$("#metro_btn").text("Stop")}}function play_midi(){if(play==0){var a=$("#listen_bpm").slider("value");midiFile=MidiFile(midiParams.miditrack,a);synth=Synth(22100);replayer=Replayer(midiFile,synth);AudioPlayer(replayer);PlaySound("tune_wav");play=1;$("#play_pop").html('<i class="icon-white icon-stop"></i>Stop');return false}}function stop_midi(){play=0;StopSound("tune_wav");$("#play_pop").html('<i class="icon-white icon-play"></i>Play')}function printDiv(c){var b=document.getElementById(c).innerHTML;var a=window.open("","Random Rhythm","height=1400,width=700");a.document.write("<html><head><title>Random Rhythm</title>");a.document.write("</head><body >");a.document.write(b);a.document.write("</body></html>");a.print();a.close();return false}function print_midi(e){var d=$("#listen_bpm").slider("value");midiFile=MidiFile(midiParams.miditrack,d);synth=Synth(11025);replayer=Replayer(midiFile,synth);AudioPlayer(replayer);var f=$("#tune_wav").attr("src");var c=document.createElement("a");c.setAttribute("href",f);c.innerHTML='Click right button and select "save link as" to download the wav file';var b=window.open("","Midi","height=400,width=700");b.document.write("<html><head><title>Random Rhythm</title>");b.document.write("</head><body >");b.document.write($("#midicontainer").html());b.document.write("<br>");b.document.getElementsByTagName("body")[0].appendChild(c);b.document.write("</body></html>");return false}function set_options(){max_size=alertSize();midi_tempo=($("#mdi_tmpo").slider("value"))*1;bars_number=($("#bar_nbr").slider("value"))*1;pg_width=($("#pg_wdth").slider("value"))*1;if(pg_width<max_size){renderParams.width=pg_width*1;printerParams.staffwidth=pg_width*1}else{renderParams.width=max_size*0.9;printerParams.staffwidth=max_size*0.9}}function alertSize(){var b=0,a=0;if(typeof(window.innerWidth)=="number"){b=window.innerWidth;a=window.innerHeight}else{if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){b=document.documentElement.clientWidth;a=document.documentElement.clientHeight}else{if(document.body&&(document.body.clientWidth||document.body.clientHeight)){b=document.body.clientWidth;a=document.body.clientHeight}}}return b}function render_reading_exercise(h){set_options();var d="X:1\nT: Reading Exercise\nM:";var g="\nL:1/16\nK:clef=perc stafflines=1\n%%barsperstaff  4\n";if(h==="simple"){var f=$("input:checkbox:checked.onebeat").map(function(){return this.value}).get();var b=$("input:radio:checked.tdif").map(function(){return this.value}).get();b=b.concat($("input:checkbox:checked.tdif").map(function(){return this.value}).get());var e=$("input:radio:checked.meter").map(function(){return this.value}).get();e=e[0]}else{var f=$("input:checkbox:checked.cmp_onebeat").map(function(){return this.value}).get();var e=$("input:radio:checked.cmeter").map(function(){return this.value}).get();var b=$("input:radio:checked.cdif").map(function(){return this.value}).get();b=b.concat($("input:checkbox:checked.cdif").map(function(){return this.value}).get());e=e[0]}preamble=d.concat(e,g);midipreamble=d.concat(e,"\nL:1/16\nK:clef=perc\n[V:v1] |");if(e==="7/8"){staff=generate_reading_exercise_78(f,b,(renderParams.width/1280),bars_number)}else{staff=generate_reading_exercise(f,b,e,h,(renderParams.width/1280),bars_number)}var c=preamble.concat(staff);var a=compose_midi_staff(staff,midipreamble,e);render_scores(c,a)}function render_gr8(){set_options();var d="X:1\nT: Random groove\nC:Alexandre Wagemakers\nM: 4/4\nL: 1/16\nK: clef=perc\n%%stretchlast 0\n|";var e="X:1\nM: 4/4\nL:1/16\nK:clef=perc\n[V:v1] |";var b=generate_pattern_markov_8(bars_number);var c=d.concat(b);var a=compose_midi_staff(b,e,"4/4");render_scores(c,a)}function render_patterns_paradidles(){set_options();var d="X:1\nT: Random groove\nC:Alexandre Wagemakers\nM: 4/4\nL: 1/16\nK: clef=perc\n%%stretchlast 0\n|";var e="X:1\nM: 4/4\nL:1/16\nK:clef=perc\n[V:v1] |";var b=generate_pattern_paradidles(bars_number);var c=d.concat(b);var a=compose_midi_staff(b,e,"4/4");render_scores(c,a)}function render_accent_exercise(){set_options();var e="X:1\nT: Random groove\nC:Alexandre Wagemakers\nM: 4/4\nL: 1/16\nK: clef=perc stafflines=1\n%%stretchlast 0\n|";var f="X:1\nM: 4/4\nL:1/16\nK:clef=perc\n[V:v1] |";var d=$("input:checkbox:checked.sticking").map(function(){return this.value}).get();var b=generate_accent_exercise(d,bars_number);var c=e.concat(b);var a=compose_midi_staff(b,f,"4/4");render_scores(c,a)}function render_coordination_exercise(){set_options();var d="X:1\nT: Coordination Exercise\nC:Alexandre Wagemakers\nM:4/4\nL: 1/16\n%%score (v1 v2)\n%%stretchlast 0\n%%barsperstaff 1\nK: clef=perc\n";var c=$("input:radio:checked.md_form").map(function(){return this.value}).get();c=c.concat($("input:radio:checked.mi_form").map(function(){return this.value}).get());staff=generate_coordination_exercise(c,bars_number);var b=d.concat(staff);var a=compose_midi_staff(staff,d,"4/4");render_scores(b,b)}function render_scales_exercise(){set_options();var e="X:1\nT: Accent Exercise\nC:Alexandre Wagemakers\nM:4/4\nL: 1/32\n%%stretchlast 0\nK: clef=perc stafflines=1\n";
var f="X:1\nM: 4/4\nL:1/32\nK:clef=perc\n[V:v1] |";var b=$("input:radio:checked.sc1").map(function(){return this.value}).get();var d=$("input:radio:checked.st1").map(function(){return this.value}).get();staff=generate_scale_exercise(b,d,bars_number);var c=e.concat(staff);bars_number=8;var a=compose_midi_staff(staff,f,"4/4");render_scores(c,a)}function render_comping_exercise(){set_options();var d="X:1\nT: Comping Exercise\nR:Swing feel\nC:Alexandre Wagemakers\n M:4/4\nL:1/16\nK:clef=perc\n%%stems=up\n%%barsperstaff  4\n|:";var f="X:1\nM: 4/4\nL:1/16\nK:clef=perc\n[V:v1] |";var b=$("input:checkbox:checked.cmping_vc").map(function(){return this.value}).get();var e=$("input:checkbox:checked.cmping_nt").map(function(){return this.value}).get();var a=generate_comping_exercise(b,e,4,(renderParams.width/1280),bars_number);var c=d.concat(a,":|\n");midiParams={qpm:midi_tempo};midistr="";meter_in=4;for(i=0;i<(bars_number+1);i++){midistr=midistr.concat("[^F,,4e4] (3:2:3[^F,,2e2]z2^F,,2 [^F,,4e4] (3:2:3[^F,,2e2]z2^F,,2 |")}midistaff=a.replace(/\n/g,"");midistaff=midistaff.replace(/F/g,"C,,");midistaff=midistaff.replace(/c/g,"D,,");midistr=f.concat(midistaff,"\n[V:v2]\n| ",midistr," |]\n ");render_scores(c,midistr)}function render_scores(b,a){midiParams.qpm=midi_tempo;ABCJS.renderMidi("midicontainer",a,{},midiParams,{});ABCJS.renderAbc("notation",b,{},printerParams,renderParams);$("#midicontainer").hide();$("#myModal").modal("hide")}function compose_midi_staff(a,c,d){if(d==="7/8"){d=7}else{d=d.split("/");if(d[1]==="4"){d=d[0]*1;var e="simple"}else{d=d[0]/3}}var b="";for(i=0;i<(bars_number*d);i++){if(i%d==0&&i!=(bars_number-1)&&i!=0){b=b.concat("|")}if(e==="simple"){b=b.concat("e4")}else{if(d===7){b=b.concat("e2")}else{b=b.concat("e6")}}}midistaff=a.replace(/\n/g,"");midistaff=midistaff.replace(/B/g,"D,,");midistaff=midistaff.replace(/c/g,"D,,");midistaff=midistaff.replace(/F/g,"C,,");midistaff=midistaff.replace(/g/g,"^F,,");midistaff=c.concat(midistaff,"\n[V:v2] |",b,"|]\n");return midistaff}function generate_reading_exercise_78(b,c,h,n){var d;var a;var l;var m;var g="";var o="";var f=0;a=c[0];if(c.length>1){l=1}meter_comb=new Array();meter_comb[0]=[1,1,1.5];meter_comb[1]=[1,1.5,1];meter_comb[2]=[1.5,1,1];m=Math.floor(3*Math.random());meter_comb=meter_comb[m];o="R: Meter combination is:";for(d=0;d<3;d++){o=o.concat((meter_comb[d]===1?" 8th ":" dot-8th"))}o=o.concat("\n");var e=3;num_notes=n*3;b.push(0);for(d=0;d<num_notes;d++){if(d%e==0&&d!=(num_notes-1)&&d!=0){o=o.concat("| ")}if(((f>40*h)&&(d%e==0))){o=o.concat("\n ");f=0}if(d%(e*4)==0&&l){g=set_dynamics();o=o.concat(g)}m=Math.floor(b.length*Math.random());if(meter_comb[d%e]===1){ret=print_score_simple(b[m],a)}else{ret=print_score_compound(b[m],a)}o=o.concat(ret.str);f=f+ret.num_notes}o=o.concat("|]\n");return o}function generate_reading_exercise(c,d,h,p,m,q){var e;var b;var o;var n;var g="";var r="";var f=0;var a=1;var s=2;b=d[0];if(d.length>1){o=1}if(p==="simple"){var l=print_score_simple;h=h.split("/");h=h[0]*1}else{var l=print_score_compound;h=h.split("/");h=h[0]/3}num_notes=q*h;c.push(0);for(e=0;e<num_notes;e++){if(e%h==0&&e!=(num_notes-1)&&e!=0){r=r.concat("| ")}if(((f>40*m)&&(e%h==0))){r=r.concat("\n ");f=0}if(e%(h*4)==0&&o){g=set_dynamics();r=r.concat(g)}n=Math.floor(c.length*Math.random());if(c[n]>=8){if((e%h)<=(h-2)){ret=l(c[n],b);e++}else{while(c[n]>=8){n=Math.floor(c.length*Math.random())}ret=l(c[n],b)}}else{ret=l(c[n],b)}r=r.concat(ret.str);f=f+ret.num_notes}r=r.concat("|]\n");return r}function set_dynamics(){var a=["!ppp!","!pp!","!p!","!f!","!ff!","!fff!"];var b=["!crescendo(!","!crescendo)!","!diminuendo(!","!diminuendo)!"];rnum=Math.floor(a.length*Math.random());return(a[rnum])}function print_score_simple(c,d){var a={};a.str="";a.num_notes=0;if(c==0){a.str=" z4 ";a.num_notes=1}if(c==1){a.str=" B4 ";a.num_notes=1}if(c==2){if(d==1){a.str=" B2B2 ";a.num_notes=2}if(d==2){var b=[" B2z2 "," B2B2 "," z2B2 "];num_pat=Math.floor(b.length*Math.random());a.str=b[num_pat];a.num_notes=2}}if(c==3){if(d==1){a.str=" BBBB "}if(d==2){var b=[" BBBB "," zB3 "," z2B2 "," z3B "," BBz2 "," BzBz "," B3B "," z BB z "," z BB2 "," z B z B "," z B2B "," z2BB "," zBBB "," B z BB "," B2BB "," BB z B "," BB2B "," BBBz "," BBB2 "];num_pat=Math.floor(b.length*Math.random());a.str=b[num_pat];a.num_notes=a.str.replace(/[^B]/g,"").length+a.str.replace(/[^z]/g,"").length}}if(c==4){if(d==1){a.str=" (3:2:3B2B2B2 ";a.num_notes=3}if(d==2){var b=[" (3B2B2B2 "," (3 B2z2B2 "," (3 z2B2B2 "," (3 B2B2z2 "," (3 z2B2z2 "," (3 z2z2B2 "];num_pat=Math.floor(b.length*Math.random());a.str=b[num_pat];a.num_notes=3}}if(c==5){if(d==1){a.str=" (5BBBBB ";a.num_notes=5}if(d==2){var b=[" (5BBBBB "," (5 BzBBB "," (5 BBzBB "," (5 BBBzB "," (5 BBBzB "," (5 BBBBz "," (5 zBBBB "," (5 zBzBz "," (5 zzBBz "," (5 zBBzz "," (5 BzBBz "," (5 BzBzB "," (5 zBBBz "," (5 zzBBB "," (5 BzzzB "];num_pat=Math.floor(b.length*Math.random());a.str=b[num_pat];a.num_notes=5}}if(c==6){if(d==1){a.str=" (6BBBBBB ";a.num_notes=6}if(d==2){var b=[" (6BBBBBB "," (6 BzBBBB "," (6 BBzBBB "," (6 BBBzBB "," (6 BBBBzB "," (6 BBBBBz "];num_pat=Math.floor(b.length*Math.random());a.str=b[num_pat];a.num_notes=6}}if(c==7){if(d==1){a.str=" (7BBBBBBB ";a.num_notes=7}if(d==2){var b=[" (7BBBBBBB "," (7 BzBBBBB "," (7 BBzBBBB "," (7 BBBzBBB "," (7 BBBBzBB "," (7 BBBBBzB "];num_pat=Math.floor(b.length*Math.random());a.str=b[num_pat];a.num_notes=7}}if(c==8){if(d==1){a.str=" (3:2:3B4B4B4 ";a.num_notes=3}if(d==2){var b=[" (3:2:3z4B4B4 "," (3:2:3B4z4B4 "," (3:2:3B4B4z4 "," (3:2:3z4z4B4 "," (3:2:3B4z4z4 "," (3:2:3B4z4z4 "];num_pat=Math.floor(b.length*Math.random());a.str=b[num_pat];a.str=" (3:2:3B4z4z4 ";a.num_notes=3}}if(c==9){if(d==1){a.str=" (5:4:5B2B2B2B2B2 ";a.num_notes=5}if(d==2){var b=[" (5:4:5B2B2B2B2B2 "];num_pat=Math.floor(b.length*Math.random());a.str=b[num_pat];a.num_notes=5}}if(c==10){if(d==1){a.str=" (7:4:7B2B2B2B2B2B2B2 ";a.num_notes=7}if(d==2){var b=[" (7:4:7B2B2B2B2B2B2B2 "];num_pat=Math.floor(b.length*Math.random());a.str=b[num_pat];a.num_notes=7}}return a}function print_score_compound(b,c){var a={};a.str="";a.num_notes=0;if(b==0){a.str=" z6 ";a.num_notes=1}if(b==1){a.str=" B6 ";a.num_notes=1}if(b==2){if(c==1){a.str=" B2B2B2 ";a.num_notes=3}if(c==2){a.str=" ";for(k=0;k<3;k++){if(Math.random()>0.5){a.str=a.str.concat("B2")}else{a.str=a.str.concat("z2")}}a.str=a.str.concat(" ");a.num_notes=3}}if(b==3){if(c==1){a.str=" BBBBBB ";a.num_notes=6}if(c==2){a.str=" ";for(k=0;k<6;k++){if(Math.random()>0.5){a.str=a.str.concat("B")}else{a.str=a.str.concat("z")}}a.str=a.str.concat(" ");a.num_notes=6}}if(b==4){if(c==1){a.str=" (4:6:4BBBB ";a.num_notes=4}if(c==2){a.str=" (4:6:4";for(k=0;k<4;k++){if(Math.random()>0.5){a.str=a.str.concat("B")}else{a.str=a.str.concat("z")}}a.str=a.str.concat(" ");a.num_notes=4}}if(b==5){if(c==1){a.str=" (5:6:5BBBBB ";a.num_notes=5}if(c==2){a.str=" (5:6:5";for(k=0;k<5;k++){if(Math.random()>0.5){a.str=a.str.concat("B")}else{a.str=a.str.concat("z")}}a.str=a.str.concat(" ");a.num_notes=5}}if(b==6){if(c==1){a.str=" (7:6:7BBBBBBB ";
a.num_notes=7}if(c==2){a.str=" (7:6:7";for(k=0;k<7;k++){if(Math.random()>0.5){a.str=a.str.concat("B")}else{a.str=a.str.concat("z")}}a.str=a.str.concat(" ");a.num_notes=7}}if(b==7){if(c==1){a.str=" (8:6:8BBBBBBBB ";a.num_notes=8}if(c==2){a.str=" (8:6:";for(k=0;k<8;k++){if(Math.random()>0.5){a.str=a.str.concat("B")}else{a.str=a.str.concat("z")}}a.str=a.str.concat(" ");a.num_notes=8}}return a}var N_tab=8;var M_tab=8;var trans_tab=[[0,0,0,0,2/9,2/9,4/9,1/9],[0,0,0,4/7,1/7,1/7,1/7,0],[0,1,0,0,0,0,0,0],[10/18,1/18,1/18,1/18,0,0,5/18,0],[2/6,3/6,0,1/6,0,0,0,0],[1/4,2/4,0,0,1/4,0,0,0],[1/10,3/10,0,3/10,0,0,0,3/10],[0,0,0,2/4,1/4,0,1/4,0]];function generate_pattern_markov_8(f){var b=new Array(a);var e;var a=32*2;var d=N_tab;var c="";b[0]=generate_initial_state();a=f*4;for(e=1;e<a;e++){if(e%4==0){b[e]=generate_initial_state()}else{b[e]=gen_next_state(b[e-1])}}a=f*4;c=print_partitura_gr8(b,a,c);c=c.concat("|]\n");return c}function gen_next_state(c){var e,d,f;var b,a;b=Math.random();e=0;a=trans_tab[c][0];while(a<b){a+=trans_tab[c][++e]}return e}function generate_initial_state(){var d,c,f;var b,a;var e=[0,2/20,0,12/20,2/20,1/20,1/20,2/20];b=Math.random();d=0;a=0;while(a<b){a+=e[d++]}return(d-1)}function print_partitura_gr8(f,b,e){var c,a,d;for(c=0;c<b;c++){if(c%4==0&&c!=0){e=e.concat("|")}if(c%16==0&&c!=0){e=e.concat("\n")}switch(f[c]){case 0:e=e.concat(" [g2c2]g2 ");break;case 1:e=e.concat(" g2[g2c2] ");break;case 2:e=e.concat(" [g2c2][g2c2] ");break;case 3:e=e.concat(" [g2F2]g2 ");break;case 4:e=e.concat(" g2[g2F2] ");break;case 5:e=e.concat(" [g2F2][g2F2] ");break;case 6:e=e.concat(" [g2c2][g2F2] ");break;case 7:e=e.concat(" [g2F2][g2c2] ");break}}return e}function generate_accent_exercise(b,d){var f;var l;var e=0;var h="";var m="";var c=4;var g=0;var a=1;e=bars_number*c;for(f=0;f<e;f++){if(f%c==0&&f!=(e-1)&&f!=0){m=m.concat("| ")}if(((g>15)&&(f%c==0))){m=m.concat("\n ");g=0}l=Math.floor(b.length*Math.random());h=print_accent_score(b[l],a);if(b[l]==="1"){if(f%4==1||f%4==4){h=h.concat("  ")}}m=m.concat(h);g=g+h.replace(/[^B]/g,"").length;g=g+h.replace(/[^z]/g,"").length}m=m.concat("|]\n");return m}function print_accent_score(a,c){var b="";if(a==="1"){for(i=0;i<2;i++){if(Math.random()<0.2){b=b.concat("!>!")}if(Math.random()<0.5){b=b.concat('"_R"')}else{b=b.concat('"_L"')}b=b.concat("B2")}return b}if(a==="2"){b=" (3 ";for(i=0;i<3;i++){if(Math.random()<0.2){b=b.concat("!>!")}if(Math.random()<0.5){b=b.concat('"_R"')}else{b=b.concat('"_L"')}b=b.concat("B2")}b=b.concat(" ");return b}if(a==="3"){b=" ";for(i=0;i<4;i++){if(Math.random()<0.2){b=b.concat("!>!")}if(Math.random()<0.5){b=b.concat('"_R"')}else{b=b.concat('"_L"')}b=b.concat("B")}b=b.concat(" ");return b}}function generate_coordination_exercise(a,c){var d=4;var b="";d=4;level=1;c=1;manodcha="[V:v1]";manodcha=manodcha.concat(print_coordination_score(a[0],level),"||\n ");manodcha=manodcha.replace(/c/g,"d");manoizq="[V:v2]";manoizq=manoizq.concat(print_coordination_score(a[1],level),"||\n ");manoizq=manoizq.replace(/c/g,"F");b=b.concat(manodcha,manoizq);return b}function print_coordination_score(a,c){var b="";if(a==0){b="c4c4c4c4"}if(a==1){b="c2c2c2c2 c2c2c2c2"}if(a==2){b="(3c2c2c2 (3c2c2c2 (3c2c2c2 (3c2c2c2"}if(a==3){b="cccc cccc cccc cccc"}if(a==4){b="(5ccccc (5ccccc (5ccccc (5ccccc"}if(a==5){b="(6cccccc (6cccccc (6cccccc (6cccccc"}if(a==6){b="(7ccccccc (7ccccccc (7ccccccc (7ccccccc"}if(a==7){b="(3:2:3c4c4c4 (3:2:3c4c4c4"}if(a==8){b="(5:4:5c2c2c2c2c2 (5:4:5c2c2c2c2c2"}b=b.concat(" ");return b}function generate_scale_exercise(b,d,g){var f=4;f=4;level=1;bar_numbers=1;subdiv=8;if(b=="1"){note_length=4;mult_note=1}if(b=="2"){note_length=8;mult_note=2}if(b=="3"){note_length=16;mult_note=4}if(d=="1"){nota="B"}if(d=="2"){nota=["B","B","F","F"]}if(d=="3"){nota=["B","F","B","B","F","B","F","F"]}var c="";var a=["","","","(3:2:3","","(5:4:5","(6:4:6","(7:4:7",""];var e="";ind=0;for(i=2;i<=8;i++){if(i==4||i==8){note_length=note_length/2}ind=0;j=1;do{e=a[i];for(k=1;k<=i;k++){e=e.concat(nota[(ind%nota.length)],note_length.toString());ind++}c=c.concat(e," ");if(((ind%nota.length)!=0)&&(j==(Math.round(f/mult_note)))){j=0;c=c.concat("|")}j++}while(j<=(f/mult_note));c=c.concat("|\n")}return c}function generate_comping_exercise(l,b,f,g,n){var c;var a;var h;var e="";var o="";var d=0;var m;a=1;num_notes=n*f;tmp_type=["0","1"];b=b.concat(tmp_type);for(c=0;c<num_notes;c++){if(c%f==0&&c!=(num_notes-1)&&c!=0){o=o.concat("| ")}if(((d>30*g)&&(c%f==0))){o=o.concat("\n ");d=0}h=Math.floor(b.length*Math.random());ret=print_score_comping(b[h],a,l);o=o.concat(ret.str);d=d+ret.num_notes}return o}function print_score_comping(c,d,a){var b={};b.str=" ";b.num_notes=0;if(d==1){if(a.length>1){if(Math.random()<0.5){vt="c"}else{vt="F"}}else{vt="c"}if(c=="0"){b.str=" z4 ";b.num_notes=1}if(c=="1"){b.str=b.str.concat(vt,"4 ");b.num_notes=1}if(c=="2"){num_elem=2;num_pat=Math.floor(num_elem*Math.random());switch(num_pat){case 0:b.str=b.str.concat("(3",vt,"2z2",vt,"2 ");b.num_notes=2;break;case 1:b.str=b.str.concat("(3z2z2",vt,"2 ");b.num_notes=2;break}}if(c=="3"){num_elem=3;num_pat=Math.ceil(num_elem*Math.random());switch(num_pat){case 1:b.str=b.str.concat(" (3 z2",vt,"2",vt,"2 ");b.num_notes=3;break;case 2:b.str=b.str.concat(" (3",vt,"2",vt,"2z2 ");b.num_notes=3;break;case 3:b.str=b.str.concat(" (3 z2",vt,"2z2 ");b.num_notes=3;break}}}return b}function generate_pattern_paradidles(h){var e;var b;var d="";var a="";var g=0;var c=4;var f=0.9;for(e=0;e<h;e++){str=print_partitura_paradidle();a=a.concat(str)}return a}function print_partitura_paradidle(){var f,c;var a=[" gcgg "," !>!cgcc "," gcgc"," !>!cgcg "," gcgg "," !>!cgcc "," gccg "," !>!cggc "];var e=[" F4 "," F2F2 "," F3F "," z2FF"];var d="";var b="";for(f=0;f<2;f++){rnum_even=Math.floor(Math.random()*7/2)*2;rnum_odd=Math.floor(Math.random()*7/2)*2+1;var h=a[rnum_even];b="";for(c=1;c<5;c++){if(h.substring(c,c+1)=="g"){b=b.concat(Math.random()>0.2?"[Fg]":"g")}else{b=b.concat("c")}}d=d.concat(b,a[rnum_odd])}var g="";g=g.concat(d,"|\n ");return g};