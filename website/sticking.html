<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Sticking & Coordination</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
    <link rel="stylesheet" href="css/custom.css">
</head>
<body data-mode="sticking">

    <!-- TOP STICKY BAR -->
    <header class="sticky-header">
        <div class="container-fluid header-content">
            <div class="header-left">
                <a href="index.html" class="back-btn">← Home</a>
                <strong class="hide-mobile">Sticking & Coordination</strong>
            </div>
            
            <div class="header-center">
                 <div class="slider-group">
                    <label><small>MIDI: <span id="disp_listen_bpm">100</span></small>
                    <input type="range" id="listen_bpm" min="40" max="200" value="100"></label>
                </div>
                <div class="slider-group">
                    <label><small>Click: <span id="disp_mtro_bpm">100</span></small>
                    <input type="range" id="mtro_bpm" min="40" max="250" value="100"></label>
                </div>
            </div>

            <div class="header-right">
                <button id="play_pop" class="contrast outline btn-sm" onclick="app.toggleMidi()">▶ Listen</button>
                <button id="metro_btn" class="secondary outline btn-sm" onclick="app.toggleMetronome()">⏱ Metro</button>
            </div>
        </div>
    </header>

    <main class="container-fluid">
        <div class="app-grid">
            
            <!-- SIDEBAR -->
            <aside class="settings-sidebar">
                <button id="btn-generate" onclick="app.generateCurrent()" class="btn-primary full-width">⚡ Generate New</button>
                
                <hr>
                
                <!-- Mode Toggle (Sticking vs Coordination) -->
                <div class="setting-block">
                    <div class="segmented-control">
                        <label>
                            <input type="radio" name="sticking_type" value="accent" checked onchange="app.toggleStickingMode()">
                            <span>Accents</span>
                        </label>
                        <label>
                            <input type="radio" name="sticking_type" value="coord" onchange="app.toggleStickingMode()">
                            <span>Coordination</span>
                        </label>
                    </div>
                </div>

                <!-- PANEL 1: ACCENTS -->
                <div id="panel-accent" class="config-panel">
                    <div class="setting-block">
                        <span class="label-title">Subdivisions</span>
                        <div class="tile-grid">
                            <label class="tile"><input type="checkbox" class="sticking_opt" value="1" checked> <span>8th</span></label>
                            <label class="tile"><input type="checkbox" class="sticking_opt" value="2"> <span>Triplets</span></label>
                            <label class="tile"><input type="checkbox" class="sticking_opt" value="3"> <span>16th</span></label>
                        </div>
                    </div>
                </div>

                <!-- PANEL 2: COORDINATION -->
                <div id="panel-coord" class="config-panel" style="display:none;">
                    <div class="grid" style="grid-template-columns: 1fr 1fr; gap: 10px;">
                        <!-- Right Hand -->
                        <div>
                            <span class="label-title">Right Hand</span>
                            <div class="list-radios">
                                <label><input type="radio" name="md" value="0"> 4th</label>
                                <label><input type="radio" name="md" value="1" checked> 8th</label>
                                <label><input type="radio" name="md" value="2"> Triplets</label>
                                <label><input type="radio" name="md" value="3"> 16th</label>
                                <label><input type="radio" name="md" value="4"> 5th</label>
                                <label><input type="radio" name="md" value="5"> 6th</label>
                                <label><input type="radio" name="md" value="6"> 7th</label>
                                <label><input type="radio" name="md" value="7"> 3:4</label>
                                <label><input type="radio" name="md" value="8"> 5:4</label>
                            </div>
                        </div>
                        <!-- Left Hand -->
                        <div>
                            <span class="label-title">Left Hand</span>
                            <div class="list-radios">
                                <label><input type="radio" name="mi" value="0"> 4th</label>
                                <label><input type="radio" name="mi" value="1" checked> 8th</label>
                                <label><input type="radio" name="mi" value="2"> Triplets</label>
                                <label><input type="radio" name="mi" value="3"> 16th</label>
                                <label><input type="radio" name="mi" value="4"> 5th</label>
                                <label><input type="radio" name="mi" value="5"> 6th</label>
                                <label><input type="radio" name="mi" value="6"> 7th</label>
                            </div>
                        </div>
                    </div>
                </div>

                <hr>

                <div class="setting-block">
                    <span class="label-title">Length (Bars)</span>
                    <div class="range-wrapper">
                        <input type="range" id="bar_nbr" min="1" max="50" value="10">
                        <span id="disp_bar_nbr" class="badge">10</span>
                    </div>
                </div>
            </aside>

            <!-- MAIN AREA -->
            <section class="paper-area">
                <div id="paper" class="paper-container">
                    <div id="notation"></div>
                    <div id="midicontainer" style="display:none;"></div>
                    <div class="paper-watermark">Technique Lab</div>
                </div>
            </section>
        </div>
    </main>

    <!-- Scripts -->
    <script src="js/rdm_rhythm.js"></script> 
    <script src="js/abcjs_basic.min.js"></script>
    <script src="js/midi_player.js"></script> 
    <script src="js/app.js"></script>
</body>
</html>
