<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Patterns & Comping</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
    <link rel="stylesheet" href="css/custom.css">
</head>
<body data-mode="patterns">

    <!-- TOP STICKY BAR -->
    <header class="sticky-header">
        <div class="container-fluid header-content">
            <div class="header-left">
                <a href="index.html" class="back-btn">← Home</a>
                <strong class="hide-mobile">Grooves & Comping</strong>
            </div>
            
            <div class="header-center">
                 <div class="slider-group">
                    <label><small>MIDI: <span id="disp_listen_bpm">100</span></small>
                    <input type="range" id="listen_bpm" min="40" max="200" value="100"></label>
                </div>
                <div class="slider-group">
                    <label><small>Click: <span id="disp_mtro_bpm">100</span></small>
                    <input type="range" id="mtro_bpm" min="40" max="250" value="100"></label>
                </div>
            </div>

            <div class="header-right">
                <button id="play_pop" class="contrast outline btn-sm" onclick="app.toggleMidi()">▶ Listen</button>
                <button id="metro_btn" class="secondary outline btn-sm" onclick="app.toggleMetronome()">⏱ Metro</button>
            </div>
        </div>
    </header>

    <main class="container-fluid">
        <div class="app-grid">
            
            <!-- SIDEBAR -->
            <aside class="settings-sidebar">
                <button id="btn-generate" onclick="app.generateCurrent()" class="btn-primary full-width">⚡ Generate New</button>
                
                <hr>
                
                <!-- Mode Toggle -->
                <div class="setting-block">
                    <div class="segmented-control">
                        <label>
                            <input type="radio" name="pattern_type" value="groove" checked onchange="app.togglePatternMode()">
                            <span>Grooves</span>
                        </label>
                        <label>
                            <input type="radio" name="pattern_type" value="comping" onchange="app.togglePatternMode()">
                            <span>Comping</span>
                        </label>
                    </div>
                </div>

                <!-- PANEL 1: GROOVES -->
                <div id="panel-groove" class="config-panel">
                    <div class="setting-block">
                        <span class="label-title">Style</span>
                        <div class="list-radios">
                            <label><input type="radio" name="grvf" class="groov" value="1" checked> <span>Syncopated 8ths</span></label>
                            <label><input type="radio" name="grvf" class="groov" value="2"> <span>Paradiddle Based</span></label>
                        </div>
                    </div>
                    <small style="color:var(--muted-color)"><em>Ghost the snare and mark accents for Paradiddles.</em></small>
                </div>

                <!-- PANEL 2: COMPING -->
                <div id="panel-comping" class="config-panel" style="display:none;">
                    <div class="setting-block">
                        <span class="label-title">Voices</span>
                        <div class="tile-grid">
                            <label class="tile"><input type="checkbox" class="cmping_vc" value="3" checked> <span>Snare</span></label>
                            <label class="tile"><input type="checkbox" class="cmping_vc" value="4"> <span>Bass Drum</span></label>
                        </div>
                    </div>
                    <div class="setting-block">
                        <span class="label-title">Rhythm</span>
                        <div class="tile-grid">
                            <label class="tile"><input type="checkbox" class="cmping_nt" value="2" checked> <span>8th Notes</span></label>
                            <label class="tile"><input type="checkbox" class="cmping_nt" value="3" checked> <span>Triplets</span></label>
                        </div>
                    </div>
                    <small style="color:var(--muted-color)"><em>Play Swing pattern on Ride Cymbal.</em></small>
                </div>

                <hr>

                <div class="setting-block">
                    <span class="label-title">Length (Bars)</span>
                    <div class="range-wrapper">
                        <input type="range" id="bar_nbr" min="1" max="50" value="10">
                        <span id="disp_bar_nbr" class="badge">10</span>
                    </div>
                </div>
            </aside>

            <!-- MAIN AREA -->
            <section class="paper-area">
                <div id="paper" class="paper-container">
                    <div id="notation"></div>
                    <div id="midicontainer" style="display:none;"></div>
                    <div class="paper-watermark">Patterns Lab</div>
                </div>
            </section>
        </div>
    </main>

    <!-- Scripts -->
    <script src="js/rdm_rhythm.js"></script> 
    <script src="js/abcjs_basic.min.js"></script>
    <script src="js/midi_player.js"></script> 
    <script src="js/app.js"></script>
</body>
</html>
